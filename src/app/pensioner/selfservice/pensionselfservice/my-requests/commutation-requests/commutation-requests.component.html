<div class="container-fluid mt-2 ">

    <div class="card p-4">

        <h3 class="employee details">Commutation Requests Details</h3>
        <div class="commutationdetails_dt">
          <div class="row">
            <div class="col-md-6 col-lg-3 md-4 mt-3">
              <mat-label>Name : </mat-label> <mat-label> {{ employeeyInfo?.empName}} </mat-label> 
              <!-- <p>{{ employeeyInfo?.empName}}</p> -->
          </div>
              <!-- <div class="col-md-6 col-lg-3 md-4 mt-3" >
                  <mat-label>Request_Id : </mat-label>  
                   <mat-label>{{getPensionDtlsData?.requestId}} </mat-label> 
                
              </div>--> 
              <!-- <div class="col-md-6 col-lg-3 md-4 mt-3">
                  <mat-label>Status : </mat-label>   <mat-label>{{message}} </mat-label> 
                  <p>{{message}}</p>
              </div>  -->
          </div>
      </div>
<hr>
<div class="row">
<div class="col-lg-4 mb-3 text-center pt-2">
    <h3 class="fs-6 fw-semibold">Single Photo</h3>
    <div class="align-items-center">
      <div class="avatar-upload">
        <div class="avatar-edit" >
          <input type='file' id="imageUpload" accept=".png, .jpg, .jpeg" #fileInput (change)="uploadFile($event,1)" hidden />
        </div>
        <div class="avatar-preview img_work my-4">        
          <img [src]="imageUrl!=null?imageUrl:picData!=null?picData:'assets/images/male-avatar.jpg'"/>         
        </div>
      </div>
      <div class="ms-3" *ngIf="isSelf">
        <div class="fs-6 fw-semibold">Upload Recent Photograph*</div>
        <div class="font-size">You can upload a JPG, JPEG file. Maximum file size is 500KB.</div>
        <div class="mt-3">
          <button class="px-5" mat-raised-button type="button" color="primary" (click)="fileInput.click()">
            <mat-icon class="me-2">edit</mat-icon>Upload
          </button>        
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-4 mb-3 text-center pt-2">
    <h3 class="fs-6 fw-semibold">Joint Photo</h3>
    <div class="align-items-center">
      <div class="avatar-upload">
        <div class="avatar-edit" >
          <input type='file' id="imageUpload" accept=".png, .jpg, .jpeg" #fileInput1 (change)="uploadFile($event,2)" hidden />
        </div>
        <div class="avatar-preview img_work my-4">        
          <img [src]="jointUrl!=null?jointUrl:picData!=null?picData:'assets/images/male-avatar.jpg'"/>         
        </div>
      </div>
      <div class="ms-3" *ngIf="isJoint">
        <div class="fs-6 fw-semibold">Upload Recent Photograph*</div>
        <div class="font-size">You can upload a JPG, JPEG file. Maximum file size is 500KB.</div>
        <div class="mt-3">
          <button class="px-5" mat-raised-button type="button" color="primary" (click)="fileInput1.click()">
            <mat-icon class="me-2">edit</mat-icon>Upload
          </button>        
        </div>
      </div>
    </div>
  </div>
</div>
  <hr>
        <div class="commutationdetails_dt">
            <div class="row">
              <div class="col-md-6 col-lg-3 md-4 mt-3">
                <mat-label>Employee Code:</mat-label>
                <p>{{ userdetails[0]?.employeeCode}}</p>
            </div>
                <div class="col-md-6 col-lg-3 md-4 mt-3">
                    <mat-label>Name</mat-label>
                    <p>{{ employeeyInfo?.empName}}</p>
                </div>
                <div class="col-md-6 col-lg-3 md-4 mt-3">
                    <mat-label>Date Of Retirement</mat-label>
                    <p>{{ userdetails[0]?.dateOfRetirement}}</p>
                </div>
                <div class="col-md-6 col-lg-3 md-4 mt-3">
                  <mat-label>PPO No:</mat-label>
                  <p>{{  userdetails[0]?.ppoNo}}</p>
              </div>
              
            </div>
        </div>
        <hr>
        <form [formGroup]="getCommutationForm" >
            <div class="mt-2">
                <div class="row">
                    <!-- <h3 class="search-commutation">Commutation</h3> -->
                    <div class="col-md-6 col-lg-3 md-4 mt-3">
                        <div class="d-block mt-2"></div>
                        <mat-label>Commutation Required </mat-label >
                        <mat-radio-group formControlName="empCommutationFlag" (change)="changeCommutation()"  > 
                                              
                            <mat-radio-button class="example-margin ms-3" value="Y"  color="primary" >Yes </mat-radio-button>
                            <mat-radio-button class="example-margin" value="N"  color="primary" class="ms-3" >No</mat-radio-button>  
                           
                        </mat-radio-group>
                    </div>
                    <div class="col-md-6 col-lg-3 md-4 mt-3" *ngIf="getCommutationForm.value.empCommutationFlag === 'Y'">
                        <mat-form-field class="w-100" >
                            <mat-label>Date</mat-label>
                            <input matInput formControlName="empCommutationDate" [min]="employeeyInfo.dateOfRetirement" [matDatepicker]="picker2" readonly="">                           
                            <mat-datepicker-toggle matSuffix [for]="picker2" hidden></mat-datepicker-toggle >
                            <mat-datepicker #picker2 class="mat-piker" > </mat-datepicker>
                        </mat-form-field>
                    </div>
                     <div class="col-md-6 col-lg-3 md-4 mt-3"  *ngIf="getCommutationForm.value.empCommutationFlag === 'Y'">
                        <mat-form-field class="w-100">
                            <mat-label>Commutation Percentage*</mat-label>
                            <input matInput id="empCommutationPercentage1"   (keypress)="omit_special_char($event)" (blur)="setCommutation($event)" formControlName="empCommutationPercentage" maxlength="5" matInput     >
                           
                        </mat-form-field>                       

                    </div> 
                    <div class="col-md-6 col-lg-3 md-4 mt-3"  *ngIf="getCommutationForm.value.empCommutationFlag === 'Y'">
                      <mat-form-field class="w-100">
                          <mat-label>Confirm Commutation Percentage*</mat-label>
                          <input matInput id="empCommutationPercentageComfirm"  formControlName="empCommutationPercentageComfirm" (keypress)="omit_special_char($event)" (blur)="confirmper()" maxlength="5" matInput>
                         
                      </mat-form-field>                       

                  </div> 
                </div>
            </div>
         
           <div class="my-2"  *ngIf="isCalculation"> 
            <hr>
              <div class="row"  >
               
                 
                  <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4 col-xl-4 col-xxl-4 ">
                    <mat-label>Pension Amount: </mat-label>
                    <strong class="amount">{{Pension_Commutation?.pensionAmount}}</strong>
            
                  </div>
                  <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4 col-xl-4 col-xxl-4 ">
                    <mat-label>Commuted Pension: </mat-label>
                    <strong  class="amount">{{Pension_Commutation?.cpoDeduction}}</strong>
                  </div>
                  <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4 col-xl-4 col-xxl-4 ">
                    <mat-label>Reduced Pension Amount: </mat-label>
                    <strong  class="amount">{{Pension_Commutation?.netpensionAmount}}</strong>
              </div>
                  <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4 col-xl-4 col-xxl-4">
                    <mat-label>Commutation Amount: </mat-label>
                    <strong  class="amount">{{Pension_Commutation?.commutationAmount}}</strong>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4 col-xl-4 col-xxl-4">
                    <mat-label>Commutation Factor: </mat-label>
                    <strong  class="amount">{{Pension_Commutation?.commutedFactor}}</strong>
                    
                </div>
                
                <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4 col-xl-4 col-xxl-4">
                  <div>
                    <mat-label> Commutation Percentage: </mat-label>
                    <strong  class="amount">{{Pension_Commutation?.commutationValue}}</strong>
                  </div>
                
               
                </div>
               
              </div> 
           
                                
          </div>
           <hr>
            <div class="my-2" > 
              <span  >Your Present Mapped Office for Forwarding the Pension Commutation case is under:</span>
                <br><br>
                <div class="row" *ngIf="isOfficeShow">
                  <div class="col-lg-4">
                    <span>Office Name:</span><br><strong>{{officeData?.officeName}} </strong><br>
                   
                  </div>
                  <div class="col-lg-4">
                    <span>Office Code:  </span> <br><strong> {{officeData?.officeId}}</strong><br>
                  </div>
                  <div class="col-lg-4">
                    <span>HO Name:  </span> <br><strong>{{officeData?.officeHoName}} </strong>
                  </div>
                </div> 
                
                 <div class="row">
                 
                <div class="col-md-6 col-lg-6 md-6 mt-3" >
                  <span  >If change in office, please select "Other" office for mapping...:</span><br>
                    <mat-radio-group class="">
                      <mat-radio-button class="me-3 my-2" [value]="'1'" (change)="selectOption($event)" [checked]="isOffice">Employee Office</mat-radio-button>
                      <mat-radio-button [value]="'2'" (change)="selectOption($event)" [checked]="!isOffice">Other</mat-radio-button>
                  </mat-radio-group>
                </div>      
                <div class="col-md-6 col-lg-6 md-6 mt-3" *ngIf="!isOffice">                 
                  <mat-radio-group class="">
                    <mat-radio-button class="me-3 my-2" [value]="'1'" (change)="selectOption2($event)" [checked]="isList">You know office ID</mat-radio-button>
                    <mat-radio-button [value]="'2'" (change)="selectOption2($event)" [checked]="!isList">Do'nt Know</mat-radio-button>
                </mat-radio-group>
              </div>
                <div class="row">
                  <div class="col-md-6 col-lg-4 md-4 mt-3" *ngIf="isKnow && isList" >                    
                    <mat-form-field class="w-100" appearance="outline" >
                      <mat-label>Enter Ofiice Code</mat-label>
                      <input matInput type="number" [(ngModel)]="oOfficeId" [ngModelOptions]="{standalone: true}" placeholder="Ofiice Code">
                    </mat-form-field>                   
                  </div>
                  <div class="col-md-6 col-lg-4 md-4 mt-3" *ngIf="isKnow && isList" >                    
                    <button mat-raised-button color="primary" type="button" (click)="checkOfficeId(1)" > Check </button>                    
                  </div>
                </div>
                <div class="row" *ngIf="isKnow && !isList" >    
          
                <div class="col-md-6 col-lg-4 md-4 mt-3" >                  
                  <mat-form-field class="w-100">
                    <mat-label> Department List</mat-label>                   
                    <mat-select placeholder="select Department" [(ngModel)]="pdeptId" [ngModelOptions]="{standalone: true}" (selectionChange)="getOfficeList()" >
                      <mat-form-field class="w-100" appearance="legacy">
                        <input matInput id="myInput" placeholder="Enter For Search" class="input-control" #box style="width:30%;" [formControl]="searchdepartment"  />
                        <mat-icon matSuffix style="position: absolute;right:1%;margin-top: -22px;">search</mat-icon>
                    </mat-form-field>                      
                      <mat-option *ngFor="let obj of $searchdepartment | async"[value]="obj.vId" >{{obj.vNameEnglish}} ({{obj.vId}})</mat-option>
                    </mat-select>
                  </mat-form-field>
                  </div>
                <div class="col-md-6 col-lg-4 md-4 mt-3" >
                <mat-form-field class="w-100">
                  <mat-label> Office List</mat-label>                  
                  <mat-select placeholder="select Office" [(ngModel)]="pofficeId" [ngModelOptions]="{standalone: true}" (selectionChange)="checkOfficeId(2)">
                    <mat-form-field class="w-100" appearance="legacy">
                      <input matInput id="myInput" placeholder="Enter For Search" class="input-control" #box style="width:30%;" [formControl]="serchOffice"/> 

                      <mat-icon matSuffix style="position: absolute;right:1%;margin-top: -22px;">search</mat-icon>
                  </mat-form-field>               
                    <mat-option *ngFor="let obj of $serchOffice | async"[value]="obj.vId">{{obj.vNameEnglish}} ({{obj.vId}})</mat-option>
                  </mat-select>
                </mat-form-field>
                </div>
              </div>            
          
             </div>                  
            </div>
            <div class="row" *ngIf="!isOfficeShow">
              <div class="col-lg-4">
                <span>Office Name:</span><br><strong>{{officeData?.officeName}} </strong><br>
               
              </div>
              <div class="col-lg-4">
                <span>Office Code:  </span> <br><strong> {{officeData?.officeId}}</strong><br>
              </div>
              <div class="col-lg-4">
                <span>HO Name:  </span> <br><strong>{{officeData?.officeHoName}} </strong>
              </div>
            </div> 
            <hr>
          <div class="user_con">
            <span style="color: rgb(248, 9, 9);font-size: 16px;">*Once the commutation option is chosen, it cannot be revised.</span>
          </div>
            <!-- <div class="user_con">
                <div class="row">                    
                    <div class="col-lg-12" >  
                        <mat-icon style="color:green;float: left; margin-right: 5px;">check_box</mat-icon>         
                        <p style="text-align: justify;">This is Certified that : I <b>{{employeeyInfo?.empName}}</b> (the undersigned) agree and undertake to refund or make good any amount to which I am not entitled or any amount which may be credited to my account in access of the amount to which I am or would be entitled. </p>
                        <mat-icon style="color:green;float: left; margin-right: 5px;">check_box</mat-icon>        
                        <p style="text-align: justify;"> I further hereby undertake and agree to bind myself and my heirs, successor, executers, legal representatives and administrators to indemnify the Government of Rajasthan through Pension and Pensioners Welfare Department/any other authorities authorized by Govt. of Rajasthan from and against any financial /monetary loss suffered or incurred by the Government of Rajasthan in so crediting my pension to my account under the rules and to forthwith pay the same to the Government of Rajasthan.</p>
                         <mat-icon style="color:green;float: left; margin-right: 5px;">check_box</mat-icon>         
                         <p style="text-align: justify;"> I also irrevocably authorize the Pension and Pensioners Welfare Department/any other authorities authorized by Govt. of Rajasthan to recover the due amount under prevailing law by giving direction to my account holder bank(s) to debit to my said account or any other account/deposits belonging to me in the possession of the banks situated in India.</p>
                         <mat-icon style="color:green;float: left; margin-right: 5px;">check_box</mat-icon>         
                        <p style="text-align: justify;"> I Shall be responsible for each and every information submitted in this application form. If any information found to be false i will be fully responsible for all legal action. </p>
                         <mat-icon style="color:green;float: left; margin-right: 5px;">check_box</mat-icon>         
                        <p style="text-align: justify;">  The undersigned agree and undertake also to refund any over payment of salary and other emoluments /personnel claims for which I am/was not entitled. I also agree to refund/repay any amount of penalties imposed by the authority of Government of Rajasthan, any court, audit objections by AG and / or any department of Government Of Rajasthan and any amount so decided by the Government under rules / law / notification etc.</p>
                         <mat-icon style="color:green;float: left; margin-right: 5px;">check_box</mat-icon>         
                         <p style="text-align: justify;">  I, the undersigned agree to produce/upload life certificate (under rule 134 of RCS pension rules,1996) or verification of continuous existence through any of the authorized modes available to the pensioner to submit it digitally for continuation of payment of pensionary benefits whenever it becomes due. Failing which my payment of pensionary benefits shall not be released by pension payment officer/authority.</p>
                            
                    </div>
                </div>                
            </div>            -->
        </form>     
          <div class="col-12 text-center">  
              <ng-container >                    
                  <button mat-raised-button color="primary" class="center-container"(click)=" verifyMobileNo()"> Verify & Submit  </button>
              </ng-container>
          </div>       
    </div>
</div>